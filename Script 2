local HttpService = game:GetService("HttpService")
local playerGui = game.Players.LocalPlayer:WaitForChild("PlayerGui")
local button = script.Parent
local textbox = button.Parent:FindFirstChild("TextBox") -- T√¨m √¥ nh·∫≠p Key

-- [ LINK GITHUB - KI·ªÇM TRA K·ª∏ LINK N√ÄY ]
local DB_URL = "https://raw.githubusercontent.com/chunghoadinh1910-oss/Huyf/refs/heads/main/database.json"
local SCRIPT_MAIN = "https://raw.githubusercontent.com/chunghoadinh1910-oss/Huyf/refs/heads/main/Script"

button.MouseButton1Click:Connect(function()
    print("‚ö° ƒê√£ b·∫•m n√∫t Check Key!") -- Ki·ªÉm tra xem n√∫t c√≥ ho·∫°t ƒë·ªông kh√¥ng
    
    if not textbox then
        warn("‚ö†Ô∏è Kh√¥ng t√¨m th·∫•y TextBox! H√£y ƒë·∫∑t t√™n √¥ nh·∫≠p l√† TextBox")
        return
    end

    -- Hi·ªáu ·ª©ng tia ch·ªõp
    local f = Instance.new("Frame", playerGui:FindFirstChildOfClass("ScreenGui"))
    f.Size = UDim2.new(1,0,1,0); f.BackgroundColor3 = Color3.new(1,1,1); f.ZIndex = 100
    task.spawn(function() for i=1,4 do f.Visible=true; task.wait(0.04); f.Visible=false; task.wait(0.04) end f:Destroy() end)

    -- L·∫•y d·ªØ li·ªáu t·ª´ GitHub
    local success, response = pcall(function()
        return HttpService:GetAsync(DB_URL)
    end)

    if success then
        local data = HttpService:JSONDecode(response)
        local inputKey = textbox.Text
        print("üîë Key v·ª´a nh·∫≠p: " .. inputKey)

        if data.Keys[inputKey] then
            print("‚úÖ Key chu·∫©n! ƒêang load script...")
            
            -- Th√¥ng b√°o
            game:GetService("StarterGui"):SetCore("SendNotification", {
                Title = "X√ÅC TH·ª∞C TH√ÄNH C√îNG",
                Text = "ƒêang tri·ªáu h·ªìi Script ch√≠nh...",
                Duration = 5
            })

            -- Ch·∫°y Script ch√≠nh
            task.wait(0.5)
            local scriptSuccess, scriptErr = pcall(function()
                loadstring(game:HttpGet(SCRIPT_MAIN))()
            end)
            
            if not scriptSuccess then
                warn("üíÄ L·ªói Script ch√≠nh: " .. tostring(scriptErr))
            end
        else
            print("‚ùå Key n√†y kh√¥ng c√≥ trong h·ªá th·ªëng!")
            game:GetService("StarterGui"):SetCore("SendNotification", {
                Title = "SAI PH√ô CH√ö",
                Text = "Key kh√¥ng h·ª£p l·ªá ho·∫∑c ƒë√£ h·∫øt h·∫°n!",
                Duration = 5
            })
        end
    else
        warn("‚ö†Ô∏è Kh√¥ng th·ªÉ k·∫øt n·ªëi GitHub! H√£y ki·ªÉm tra link RAW ho·∫∑c HTTP Service.")
    end
end)
