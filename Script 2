local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")
local CoreGui = game:GetService("CoreGui")
local Workspace = game:GetService("Workspace")

local Config = {
    RawUrl = "https://raw.githubusercontent.com/chunghoadinh1910-oss/Huyf/refs/heads/main/database.json",
    HWID = game:GetService("RbxAnalyticsService"):GetClientId(),
    GetKeyLink = "https://discord.gg/yourlink" -- Thay link Discord c·ªßa b·∫°n v√†o ƒë√¢y
}

local ScreenGui = Instance.new("ScreenGui", CoreGui)

-- 1. FRAME ƒêƒÇNG NH·∫¨P
local LoginFrame = Instance.new("Frame", ScreenGui)
LoginFrame.Size = UDim2.new(0, 350, 0, 250)
LoginFrame.Position = UDim2.new(0.5, -175, 0.5, -125)
LoginFrame.BackgroundColor3 = Color3.fromRGB(20, 0, 40)
Instance.new("UIStroke", LoginFrame).Color = Color3.fromRGB(150, 0, 255)
Instance.new("UICorner", LoginFrame)

local KeyBox = Instance.new("TextBox", LoginFrame)
KeyBox.Size = UDim2.new(0.8, 0, 0, 40)
KeyBox.Position = UDim2.new(0.1, 0, 0.3, 0)
KeyBox.PlaceholderText = "Nh·∫≠p b√πa ch√∫..."
KeyBox.BackgroundColor3 = Color3.fromRGB(40, 0, 80)
KeyBox.TextColor3 = Color3.new(1,1,1)

local LoginBtn = Instance.new("TextButton", LoginFrame)
LoginBtn.Size = UDim2.new(0.4, 0, 0, 40)
LoginBtn.Position = UDim2.new(0.05, 0, 0.6, 0)
LoginBtn.Text = "GI·∫¢I ·∫§N"
LoginBtn.BackgroundColor3 = Color3.fromRGB(100, 0, 200)

local GetKeyBtn = Instance.new("TextButton", LoginFrame)
GetKeyBtn.Size = UDim2.new(0.4, 0, 0, 40)
GetKeyBtn.Position = UDim2.new(0.55, 0, 0.6, 0)
GetKeyBtn.Text = "L·∫§Y B√ôA"
GetKeyBtn.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
GetKeyBtn.MouseButton1Click:Connect(function() 
    setclipboard(Config.GetKeyLink)
    game:GetService("StarterGui"):SetCore("SendNotification", {Title="System", Text="ƒê√£ copy link l·∫•y key!"})
end)

-- 2. MENU CH√çNH & N√öT T·∫ÆT M·ªû
local MainMenu = Instance.new("Frame", ScreenGui)
MainMenu.Size = UDim2.new(0, 400, 0, 300)
MainMenu.Position = UDim2.new(0.5, -200, 0.5, -150)
MainMenu.Visible = false
MainMenu.BackgroundColor3 = Color3.fromRGB(10, 10, 10)
MainMenu.Draggable = true
MainMenu.Active = true
Instance.new("UIStroke", MainMenu).Color = Color3.fromRGB(255, 0, 0)

local ToggleBtn = Instance.new("TextButton", ScreenGui)
ToggleBtn.Size = UDim2.new(0, 50, 0, 50)
ToggleBtn.Position = UDim2.new(0, 10, 0.5, 0)
ToggleBtn.Text = "üëÅÔ∏è"
ToggleBtn.Visible = false
ToggleBtn.BackgroundColor3 = Color3.fromRGB(0,0,0)
ToggleBtn.TextColor3 = Color3.new(1,0,0)
Instance.new("UICorner", ToggleBtn).CornerRadius = UDim.new(1,0)
ToggleBtn.MouseButton1Click:Connect(function() MainMenu.Visible = not MainMenu.Visible end)

-- [ CH·ª®C NƒÇNG ] --
local function Start(kType, expiry)
    LoginFrame.Visible = false
    ToggleBtn.Visible = true
    MainMenu.Visible = true
    
    local Title = Instance.new("TextLabel", MainMenu)
    Title.Text = "B·ªê L√Ä VUA B√ôA CH√ö - " .. kType:upper()
    Title.Size = UDim2.new(1,0,0,50)
    Title.TextColor3 = Color3.new(1,0,0)
    Title.BackgroundTransparency = 1

    -- T√≠nh nƒÉng Auto Farm (Gi·ªØ nguy√™n t√°c d·ª•ng nh∆∞ ban ƒë·∫ßu)
    local FarmBtn = Instance.new("TextButton", MainMenu)
    FarmBtn.Size = UDim2.new(0.8,0,0,40)
    FarmBtn.Position = UDim2.new(0.1,0,0.3,0)
    FarmBtn.Text = "B·∫¨T AUTO FARM ITEMS"
    FarmBtn.MouseButton1Click:Connect(function()
        _G.Farm = not _G.Farm
        FarmBtn.Text = _G.Farm and "ƒêANG FARM..." or "B·∫¨T AUTO FARM ITEMS"
        while _G.Farm do
            pcall(function()
                for _,v in pairs(Workspace:GetDescendants()) do
                    if v:IsA("TouchTransmitter") then
                        Players.LocalPlayer.Character.HumanoidRootPart.CFrame = v.Parent.CFrame
                        wait(0.2)
                    end
                end
            end)
            wait(0.1)
        end
    end)
end

-- [ X·ª¨ L√ù LOGIN ] --
LoginBtn.MouseButton1Click:Connect(function()
    local success, response = pcall(function() return game:HttpGet(Config.RawUrl.."?t="..os.time()) end)
    local data = HttpService:JSONDecode(response)
    local k = KeyBox.Text
    if data[k] then
        local d = data[k]
        if d.HWID ~= "" and d.HWID ~= Config.HWID then
            if d.Type ~= "Free" then setclipboard(Config.HWID) end
            return Notify("L·ªói", "Sai HWID!")
        end
        Start(d.Type, d.Expiry)
    end
end)
