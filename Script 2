local HttpService = game:GetService("HttpService")
local CoreGui = game:GetService("CoreGui")
local Players = game:GetService("Players")

-- D·ªçn d·∫πp b·∫£n c≈©
for _, v in pairs(CoreGui:GetChildren()) do if v.Name == "VuaBuaChu_Final" then v:Destroy() end end

local ScreenGui = Instance.new("ScreenGui", CoreGui)
ScreenGui.Name = "VuaBuaChu_Final"

-- [ GIAO DI·ªÜN ] --
local Main = Instance.new("Frame", ScreenGui)
Main.Size = UDim2.new(0, 360, 0, 260)
Main.Position = UDim2.new(0.5, -180, 0.5, -130)
Main.BackgroundColor3 = Color3.fromRGB(15, 0, 25)
Instance.new("UIStroke", Main).Color = Color3.fromRGB(255, 0, 0)
Instance.new("UICorner", Main)

local KeyBox = Instance.new("TextBox", Main)
KeyBox.Size = UDim2.new(0.9, 0, 0, 80)
KeyBox.Position = UDim2.new(0.05, 0, 0.2, 0)
KeyBox.PlaceholderText = "D√ÅN B√ôA CH√ö V√ÄO ƒê√ÇY..."
KeyBox.Text = ""
KeyBox.TextWrapped = true
KeyBox.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
KeyBox.TextColor3 = Color3.new(1, 1, 1)
KeyBox.TextSize = 10

local LoginBtn = Instance.new("TextButton", Main)
LoginBtn.Size = UDim2.new(0.43, 0, 0, 45)
LoginBtn.Position = UDim2.new(0.05, 0, 0.7, 0)
LoginBtn.Text = "GI·∫¢I B√ôA"
LoginBtn.BackgroundColor3 = Color3.fromRGB(180, 0, 0)
LoginBtn.TextColor3 = Color3.new(1, 1, 1)

local GetKeyBtn = Instance.new("TextButton", Main) -- N√∫t Get Key ƒë√£ th√™m l·∫°i
GetKeyBtn.Size = UDim2.new(0.43, 0, 0, 45)
GetKeyBtn.Position = UDim2.new(0.52, 0, 0.7, 0)
GetKeyBtn.Text = "L·∫§Y B√ôA"
GetKeyBtn.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
GetKeyBtn.TextColor3 = Color3.new(1, 1, 1)

-- [ CH·ª®C NƒÇNG MENU ] --
local function OpenMenu(kType, expiry)
    Main:Destroy()
    game:GetService("StarterGui"):SetCore("SendNotification", {Title="TH√ÄNH C√îNG", Text="üåï CH√ÄO M·ª™NG " .. kType:upper()})
    loadstring(game:HttpGet("https://raw.githubusercontent.com/Uranus9103/apexhubpro/refs/heads/main/Steal-Brainrot-APEXHUB"))()
end

-- [ X·ª¨ L√ù ƒêƒÇNG NH·∫¨P ] --
LoginBtn.MouseButton1Click:Connect(function()
    local input = KeyBox.Text:gsub("%s+", "")
    LoginBtn.Text = "ƒêANG ƒê·ªíNG B·ªò..."
    
    -- Fix l·ªói kh√¥ng ƒë·ªìng b·ªô b·∫±ng c√°ch th√™m nocache
    local success, res = pcall(function() 
        return game:HttpGet("https://raw.githubusercontent.com/chunghoadinh1910-oss/Huyf/refs/heads/main/database.json?nocache="..os.time()) 
    end)
    
    if success then
        local data = HttpService:JSONDecode(res)
        local found = nil
        
        for k, v in pairs(data) do
            -- So kh·ªõp th√¥ng minh: Kh·ªõp ho√†n to√†n HO·∫∂C ch·ª©a t·ª´ kh√≥a Admin ƒë·∫∑c bi·ªát
            if k == input or (string.find(input, "ADMIN") and string.find(k, "ADMIN")) then
                found = v
                break
            end
        end
        
        if found then
            OpenMenu(found.Type, found.Expiry)
        else
            LoginBtn.Text = "SAI B√ôA CH√ö!"
            wait(1)
            LoginBtn.Text = "GI·∫¢I B√ôA"
        end
    else
        LoginBtn.Text = "L·ªñI K·∫æT N·ªêI!"
    end
end)

GetKeyBtn.MouseButton1Click:Connect(function()
    setclipboard("https://discord.gg/vua-bua-chu") -- Link Discord l·∫•y key
    game:GetService("StarterGui"):SetCore("SendNotification", {Title="H·ªá Th·ªëng", Text="ƒê√£ copy link l·∫•y b√πa!"})
end)
