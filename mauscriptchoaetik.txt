--================ KEY SYSTEM (THÃŠM DUY NHáº¤T PHáº¦N NÃ€Y) ================--

local Players = game:GetService("Players")
local HttpService = game:GetService("HttpService")
local Player = Players.LocalPlayer
local Today = os.date("!%Y-%m-%d")

-- CONFIG
local COMMON_KEY_LINK = "https://raw.githubusercontent.com/chunghoadinh1910-oss/Huyf/refs/heads/main/User%20common"
local USER_KEY_LINK   = "https://raw.githubusercontent.com/chunghoadinh1910-oss/Huyf/refs/heads/main/User%20key"
local GET_KEY_LINK    = "https://notevn.com/raw/4xmvxv6z"
local KEY_FILE        = "TeoHub_Key.json"

-- UTILS
local function IsExpired(exp)
    return Today > exp
end

-- SAVE / LOAD
local function SaveKey(key, exp)
    if not writefile then return end
    writefile(KEY_FILE, HttpService:JSONEncode({
        Key = key,
        Exp = exp
    }))
end

local function LoadKey()
    if not readfile or not isfile then return end
    if not isfile(KEY_FILE) then return end
    local data = HttpService:JSONDecode(readfile(KEY_FILE))
    return data.Key, data.Exp
end

local function DeleteKey()
    if delfile and isfile and isfile(KEY_FILE) then
        delfile(KEY_FILE)
    end
end

-- CHECK KEY (FIX Lá»–I ÄÃšNG KEY VáºªN SAI)
local function CheckKey(inputKey)
    inputKey = inputKey:match("^%s*(.-)%s*$")

    -- KEY CHUNG
    local commonRaw = game:HttpGet(COMMON_KEY_LINK)
    for line in commonRaw:gmatch("[^\r\n]+") do
        local key, exp = line:match("(.+)|(.+)")
        if key and exp and key == inputKey and not IsExpired(exp) then
            return true, exp
        end
    end

    -- KEY RIÃŠNG
    local usersRaw = game:HttpGet(USER_KEY_LINK)
    for line in usersRaw:gmatch("[^\r\n]+") do
        local id, rest = line:match("(%d+)%=(.+)")
        if id == tostring(Player.UserId) then
            local key, exp = rest:match("(.+)|(.+)")
            if key and exp and key == inputKey and not IsExpired(exp) then
                return true, exp
            end
        end
    end

    return false
end

-- GUI KEY (NHáº¸ â€“ CHá»ˆ Äá»‚ CHáº¶N SCRIPT)
local gui = Instance.new("ScreenGui", game.CoreGui)
gui.Name = "KeyUI"
gui.Enabled = false

local frame = Instance.new("Frame", gui)
frame.Size = UDim2.fromScale(0.3, 0.3)
frame.Position = UDim2.fromScale(0.35, 0.35)
frame.BackgroundColor3 = Color3.fromRGB(30,30,30)
frame.Active = true
frame.Draggable = true
Instance.new("UICorner", frame)

local box = Instance.new("TextBox", frame)
box.Size = UDim2.fromScale(0.8, 0.2)
box.Position = UDim2.fromScale(0.1, 0.3)
box.PlaceholderText = "Nháº­p key..."
box.Text = ""
box.BackgroundColor3 = Color3.fromRGB(45,45,45)
box.TextColor3 = Color3.new(1,1,1)
Instance.new("UICorner", box)

local btn = Instance.new("TextButton", frame)
btn.Size = UDim2.fromScale(0.5, 0.18)
btn.Position = UDim2.fromScale(0.25, 0.55)
btn.Text = "CONFIRM"
btn.BackgroundColor3 = Color3.fromRGB(70,70,70)
btn.TextColor3 = Color3.new(1,1,1)
Instance.new("UICorner", btn)

local getKey = Instance.new("TextButton", frame)
getKey.Size = UDim2.fromScale(0.5, 0.14)
getKey.Position = UDim2.fromScale(0.25, 0.76)
getKey.Text = "GET KEY"
getKey.BackgroundColor3 = Color3.fromRGB(110,110,110)
Instance.new("UICorner", getKey)

getKey.MouseButton1Click:Connect(function()
    if setclipboard then
        setclipboard(GET_KEY_LINK)
    end
end)

local function Pass()
    gui:Destroy()
end

-- AUTO LOAD
task.spawn(function()
    task.wait(0.5)
    local k, exp = LoadKey()
    if k and not IsExpired(exp) and CheckKey(k) then
        Pass()
    else
        DeleteKey()
        gui.Enabled = true
    end
end)

-- MANUAL
btn.MouseButton1Click:Connect(function()
    local input = box.Text
    if input == "" then return end
    local ok, exp = CheckKey(input)
    if ok then
        SaveKey(input, exp)
        Pass()
    else
        btn.Text = "âŒ SAI KEY"
        task.wait(1)
        btn.Text = "CONFIRM"
    end
end)

--================ Tá»ª ÄÃ‚Y TRá» XUá»NG: GIá»® NGUYÃŠN SCRIPT Gá»C =================--

repeat task.wait() until game:IsLoaded()

-- â†“â†“â†“ TOÃ€N Bá»˜ CODE mauscriptchoaetik.txt Cá»¦A Báº N Äá»‚ NGUYÃŠN á» DÆ¯á»šI â†“â†“â†“

-- âœ… MáºªU CHUáº¨N CHO NGÆ¯á»œI Má»šI | TÃ‰O HUB ğŸ
-- Giá»¯ nguyÃªn giao diá»‡n tháº­t, chá»‰ thÃªm hÆ°á»›ng dáº«n ğŸ‘ˆ ngay bÃªn cáº¡nh dÃ²ng cáº§n sá»­a

repeat task.wait() until game:IsLoaded()

-- ğŸŸ¢ NÃºt má»Ÿ menu chÃ­nh
local ScreenGui = Instance.new("ScreenGui")
local ImageButton = Instance.new("ImageButton")
local UICorner = Instance.new("UICorner")

ScreenGui.Parent = game.CoreGui
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

ImageButton.Parent = ScreenGui
ImageButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
ImageButton.BorderSizePixel = 0
ImageButton.Position = UDim2.new(0.10615778, 0, 0.16217947, 0)
ImageButton.Size = UDim2.new(0, 40, 0, 40)
ImageButton.Draggable = true
ImageButton.Image = "http://www.roblox.com/asset/?id=15059956542"  -- ğŸ‘ˆ Ä‘á»•i ID áº£nh nÃºt má»Ÿ menu táº¡i Ä‘Ã¢y (áº£nh roblox)

UICorner.CornerRadius = UDim.new(1, 10)
UICorner.Parent = ImageButton

ImageButton.MouseButton1Down:Connect(function()
	game:GetService("VirtualInputManager"):SendKeyEvent(true, Enum.KeyCode.End, false, game)
end)

-- ğŸŸ£ Giao diá»‡n Fluent
local Fluent = loadstring(game:HttpGet("https://github.com/dawid-scripts/Fluent/releases/latest/download/main.lua"))()
repeat wait() until game:IsLoaded()

-- ğŸªŸ Cá»­a sá»• chÃ­nh
local Window = Fluent:CreateWindow({
	Title = "TÃ©o ğŸv2 update =}",         -- ğŸ‘ˆ Ä‘á»•i thÃ nh tÃªn script cá»§a báº¡n
	SubTitle = "vip proğŸ’ğŸ˜",              -- ğŸ‘ˆ Ä‘á»•i mÃ´ táº£ phá»¥
	TabWidth = 157,
	Size = UDim2.fromOffset(450, 300),
	Acrylic = true,
	Theme = "Amethyst",                   -- ğŸ‘ˆ Ä‘á»•i mÃ u chá»§ Ä‘áº¡o: Amethyst, Dark, Aqua, Light,...
	MinimizeKey = Enum.KeyCode.End
})

-- ğŸ“‘ CÃ¡c tab (má»¥c chÃ­nh)
local Tabs = {
	Main0 = Window:AddTab({ Title = "má»™t sá»‘ kÃªnhğŸ¤“" }),  -- ğŸ‘ˆ Ä‘á»•i tÃªn tab 1
	Main1 = Window:AddTab({ Title = "grow a gaden ğŸŒ±ğŸŒ´ğŸŒµğŸŒ²" }),  -- ğŸ‘ˆ Ä‘á»•i tÃªn tab 2
	Main2 = Window:AddTab({ Title = "bran rÃ³tğŸ’©" }),     -- ğŸ‘ˆ Ä‘á»•i tÃªn tab 3
	Main3 = Window:AddTab({ Title = "99 Ä‘ÃªmğŸ¥·" }),        -- ğŸ‘ˆ Ä‘á»•i tÃªn tab 4
	Main4 = Window:AddTab({ Title = "blox fruitğŸ" }),    -- ğŸ‘ˆ Ä‘á»•i tÃªn tab 5
	Main5 = Window:AddTab({ Title = "plan vs branroğŸŒ²ğŸ˜t" }) -- ğŸ‘ˆ Ä‘á»•i tÃªn tab 6
}

------------------------------------------------
-- TAB 1: CÃ¡c kÃªnh tiktok
------------------------------------------------
Tabs.Main0:AddButton({
	Title = "tiktok báº¡n:)",              -- ğŸ‘ˆ tÃªn nÃºt
	Description = "oÃ¡ch xÃ  lÃ¡ch vÃ´ cÃ¹ng",-- ğŸ‘ˆ mÃ´ táº£ nÃºt
	Callback = function()
		setclipboard("https://www.tiktok.com/@jannie3342?_t=ZS-90QsJQ5j0NO&_r=1")  -- ğŸ‘ˆ link sao chÃ©p
	end
})

Tabs.Main0:AddButton({
	Title = "tik",
	Description = "lÃ m chÆ¡i thui",
	Callback = function()
		setclipboard("https://www.tiktok.com/@b.yt03?_t=ZS-90QsHokNlwN&_r=1")     -- ğŸ‘ˆ link khÃ¡c
	end
})

Tabs.Main0:AddButton({
	Title = "tiktok",
	Description = "fl tiktok Ä‘á»ƒ biáº¿t thÃªm nhiá»u script",
	Callback = function()
		setclipboard("https://www.tiktok.com/@b.yt03?_t=ZS-90QsHmSjaiu&_r=1")
	end
})

------------------------------------------------
-- TAB 2: VÃ­ dá»¥ thÃªm script
------------------------------------------------
Tabs.Main1:AddButton({
	Title = "speed hubğŸŒ±",                             -- ğŸ‘ˆ tÃªn nÃºt hiá»ƒn thá»‹
	Description = "script nÃ y ngon Ã¡ Ä‘á»§ chá»©c nÄƒng cáº£ğŸ˜ƒ",-- ğŸ‘ˆ mÃ´ táº£
	Callback = function()
		local Settings = {
			JoinTeam = "Pirates";   -- ğŸ‘ˆ team máº·c Ä‘á»‹nh: Pirates hoáº·c Marines
			Translator = true;      -- ğŸ‘ˆ báº­t dá»‹ch sang tiáº¿ng Viá»‡t náº¿u cÃ³
		}
		loadstring(game:HttpGet("https://raw.githubusercontent.com/AhmadV99/Speed-Hub-X/main/Speed%20Hub%20X.lua", true))() -- ğŸ‘ˆ link script táº£i
	end
})
